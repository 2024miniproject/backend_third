<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í™ˆ</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='home.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='bar.css') }}">
    <style>
        /* í˜ì´ì§€ ë ˆì´ì•„ì›ƒ ê¸°ë³¸ ì„¤ì • */
        body {
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: row;
        }

        /* ë³¸ë¬¸ ìŠ¤íƒ€ì¼ */
        .postbox {
            margin-left: 100px; /* ì‚¬ì´ë“œë°” ë„“ì´ + ì—¬ë°± */
            padding: 20px;
            width: calc(100% - 100px); /* ì „ì²´ í™”ë©´ì—ì„œ ì‚¬ì´ë“œë°” ë„“ì´ë¥¼ ëº€ ê°’ */
        }

        /* ê²Œì‹œê¸€ ìŠ¤íƒ€ì¼ */
        .post {
            margin-bottom: 20px;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 5px;
            background-color: #fff;
            position: relative;
        }

        /* ì‚­ì œ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .delete-button {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: red;
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 5px;
        }

        /* ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ */
        .post img {
            max-width: 100%;
            height: auto;
            display: block;
        }

        /* ë§í¬ ìŠ¤íƒ€ì¼ */
        .post-title {
            cursor: pointer;
            color: #007BFF; /* ë§í¬ ìƒ‰ìƒ */
            text-decoration: underline; /* ë°‘ì¤„ */
        }
    </style>
</head>

<body>
    <!-- ì‚¬ì´ë“œë°” -->
    <div class="sidebar">
        <div class="logo">
            <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo">
            <button class="plus-button" id="addPostButton">+</button>
        </div>
        <ul class="menu">
            <li><a href="#"><span class="icon" onclick="location.href='/home'">ğŸ </span> Home</a></li>
            <li><a href="#"><span class="icon" onclick="location.href='/mydeal_views/mydealbuy'">ğŸ“¦</span> My deal</a></li>
            <li><a href="#"><span class="icon" onclick="location.href='/information'">â„¹ï¸</span> Info</a></li>
        </ul>
    </div>

    <!-- ë³¸ë¬¸ -->
    <div class="postbox">
        <h1>íŒë§¤ê¸€ ëª©ë¡</h1>
        <div class="posts">
            {% for post in posts %}
                <div class="post">
                    <h2 class="post-title" onclick="location.href='{{ url_for('detail.detail', post_id=post.id) }}'">{{ post.title }}</h2>
                    <p>ê°€ê²©: {{ post.price }} ì›</p>
                    <p>{{ post.content }}</p>

                    {% if post.image_filename %}
                        <!-- ì—…ë¡œë“œí•œ ì´ë¯¸ì§€ í‘œì‹œ -->
                        <img src="{{ url_for('static', filename=post.image_filename) }}" alt="Uploaded Image">
                    {% endif %}

                </div>
                <hr>
            {% endfor %}
        </div>
    </div>

    <script>
        let isFirstClick = true;  // ì²˜ìŒ í´ë¦­ ì—¬ë¶€

        document.getElementById('addPostButton').onclick = function() {
            if (isFirstClick) {
                // ì²˜ìŒ í´ë¦­ ì‹œ write.htmlë¡œ ì´ë™
                isFirstClick = false;  // ë‹¤ìŒ í´ë¦­ë¶€í„°ëŠ” íŒì—…ì°½ì´ ëœ¸
                window.location.href = "{{ url_for('write_views.write') }}";  // ì‘ì„± í˜ì´ì§€ë¡œ ì´ë™
            } else {
                // ë‘ ë²ˆì§¸ í´ë¦­ë¶€í„°ëŠ” íŒì—…ì°½ì„ ë„ì›€
                const confirmation = confirm("ì‘ì„±ì„ ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?");
                if (confirmation) {
                    // í™•ì¸ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ write.html ì´ˆê¸° í™”ë©´ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰ì…˜
                    window.location.href = "{{ url_for('write_views.write') }}";  // ì‘ì„± í˜ì´ì§€ë¡œ ì´ë™
                }
                // ì·¨ì†Œ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì•„ë¬´ ì¼ë„ ì¼ì–´ë‚˜ì§€ ì•ŠìŒ
            }
        }
    </script>
</body>
</html>
